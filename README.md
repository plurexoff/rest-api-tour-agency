# –ó–∞–¥–∞–Ω–∏–µ ‚Ññ7: REST API –¢—É—Ä-–ê–≥–µ–Ω—Ç—Å—Ç–≤–∞

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—É—Ä–∞–º–∏, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

## üéØ –¶–µ–ª–∏

1. –°–æ–∑–¥–∞—Ç—å REST API —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏.
2. –û–ø–∏—Å–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∏ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ (GET/POST/PUT/DELETE).
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API —Å –ø–æ–º–æ—â—å—é curl –∏ Postman.

## üÉÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
rest-api-tour-agency/
‚îú‚îÄ‚îÄ app.py                    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Flask
‚îú‚îÄ‚îÄ models.py                 # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ database.db               # SQLite –±–∞–∑–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ QUICK_START.md            # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ API.md                    # –û–ø–∏—Å–∞–Ω–∏–µ API
‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îú‚îÄ‚îÄ curl_requests.sh       # –ü—Ä–∏–º–µ—Ä—ã curl –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ postman_collection.json # Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_api.py            # –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤
‚îî‚îÄ‚îÄ .gitignore
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
git clone https://github.com/plurexoff/rest-api-tour-agency.git
cd rest-api-tour-agency
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î

```bash
python
>>> from app import app, db
>>> with app.app_context():
...     db.create_all()
...     print('Database created!')
>>> exit()
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python app.py
```

–ù–∞ `http://localhost:5000`

## üß© API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –¢—É—Ä—ã

- **GET** `/api/tours` ‚Äî –≤—Å–µ —Ç—É—Ä—ã
- **GET** `/api/tours/<id>` ‚Äî –æ–¥–∏–Ω —Ç—É—Ä
- **POST** `/api/tours` ‚Äî —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–∞
- **PUT** `/api/tours/<id>` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–∞
- **DELETE** `/api/tours/<id>` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ç—É—Ä–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

- **GET** `/api/users` ‚Äî –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **GET** `/api/users/<id>` ‚Äî –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **POST** `/api/users` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **PUT** `/api/users/<id>` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **DELETE** `/api/users/<id>` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

- **GET** `/api/bookings` ‚Äî –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **GET** `/api/bookings/<id>` ‚Äî –æ–¥–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **POST** `/api/bookings` ‚Äî —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **PUT** `/api/bookings/<id>` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **DELETE** `/api/bookings/<id>` ‚Äî –≤–∏–¥–∂–∞–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üìö –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### POST `/api/tours` –¥–∞–Ω–Ω—ã–µ

```json
{
  "destination": "–ú–∞–ª—å–¥–∏–≤—ã",
  "description": "–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–µ –ø–ª—è–∂–∏ –∏ —è—Å–Ω–∞—è –≤–æ–¥–∞",
  "price": 2500.00,
  "duration_days": 7,
  "available_slots": 10
}
```

### POST `/api/users` –¥–∞–Ω–Ω—ã–µ

```json
{
  "name": "–ö–Ω—è–∂ –ò–≤–∞–Ω",
  "email": "ivan@example.com",
  "phone": "+7 900 123 45 67"
}
```

### POST `/api/bookings` –¥–∞–Ω–Ω—ã–µ

```json
{
  "user_id": 1,
  "tour_id": 1,
  "booking_date": "2026-01-21T12:00:00",
  "status": "confirmed"
}
```

## üìã –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### curl –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç—É—Ä–æ–≤
curl http://localhost:5000/api/tours

# –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–∞
curl -X POST http://localhost:5000/api/tours \
  -H "Content-Type: application/json" \
  -d '{"destination": "–¢–∞–∏–ª–∞–Ω–¥", "price": 1500, "duration_days": 5, "available_slots": 15}'

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–∞
curl -X PUT http://localhost:5000/api/tours/1 \
  -H "Content-Type: application/json" \
  -d '{"price": 1800}'

# –£–¥–∞–ª–µ–Ω–∏–µ —Ç—É—Ä–∞
curl -X DELETE http://localhost:5000/api/tours/1
```

### Postman

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `examples/postman_collection.json`.
2. –†–∞—Å–∫—Ä—ã—Ç—å –ø—Ä–µ–¥–¥–µ—Ñ–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–≤–µ—Å—Ç—ã.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏ –æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ—Å–ø–æ–Ω—Å—ã.

## üìã –¢–µ—Å—Ç—ã

```bash
python -m pytest tests/test_api.py -v
```

## ü™∞ –î–µ–±–∞–≥–∂–Ω—ã–µ –º–æ–¥

```bash
FLASK_ENV=development FLASK_DEBUG=1 python app.py
```

## üîó Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞: `http://localhost:5000/swagger/` (–æ–ø—Ç–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìñ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–¥—ã

- **200 OK** ‚Äî —É—Å–ø–µ—à–Ω—ã–µ GET/PUT
- **201 Created** ‚Äî —Ä–µ—Å—É—Ä—Å —Å–æ—Å—Ç–∞–≤–ª–µ–Ω
- **204 No Content** ‚Äî —É—Å–ø–µ—à–Ω–æ–µ DELETE
- **400 Bad Request** ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **404 Not Found** ‚Äî —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- **500 Internal Server Error** ‚Äî –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
